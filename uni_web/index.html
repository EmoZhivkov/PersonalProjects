<!doctype html>
<html lang="bg">

<head>
	<meta charset="utf-8">
	<title>HTTP Authentication</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
		integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css"
		integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
	<link href="style.css" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
		integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
		crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
		integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
		crossorigin="anonymous"></script>
	<meta name="theme-color" content="#ffffff">
</head>

<body>

	<div class="row py-5">
		<div class="container">
			<div class="row">
				<div class="col-lg-3">
					<nav class="px-2">
						<div class="nav-tabs position-fixed"
							style="width:280px;max-height:100%;overflow:scroll;padding-bottom:30px;" id="nav-tab"
							role="tablist">
							<a class="nav-link fadeInRight" href="#nav-home1" role="tab">Какво е HTTP?</a>
							<a class="nav-link fadeInRight" href="#nav-home2" role="tab">Автентикация и Оторизация</a>
							<a class="nav-link fadeInRight" href="#nav-home3" role="tab">Схеми за автентикация на
								HTTP</a>
							<a class="nav-link fadeInRight" href="#nav-home4" role="tab">Основна Автентикация</a>
							<a class="nav-link fadeInRight" href="#nav-home5" role="tab">Имплементирането на основна
								схема за автентикация</a>
							<a class="nav-link fadeInRight" href="#nav-home6" role="tab">Следи на Съобщенията</a>
							<a class="nav-link fadeInRight" href="#nav-home7" role="tab">Съображения за сигурност</a>
							<a class="nav-link fadeInRight" href="#nav-home8" role="tab">Потребителски групи</a>
							<a class="nav-link fadeInRight" href="#nav-home9" role="tab">Дайджест Автентикация</a>
							<a class="nav-link fadeInRight" href="#nav-home10" role="tab">Имплементиране на дайджест
								автентикация</a>
							<a class="nav-link fadeInRight" href="#nav-home11" role="tab">Следи на Съобщенията</a>
							<a class="nav-link fadeInRight" href="#nav-home12" role="tab">Детайли при дайджестването</a>
							<a class="nav-link fadeInRight" href="#nav-home13" role="tab">Съображения за сигурност</a>
							<a class="nav-link fadeInRight" href="#nav-home14" role="tab">Използвани ресурси</a>
						</div>
					</nav>
				</div>
				<div class="col-lg-9">
					<div class="row">
						<div class="col-12 pb-5 text-center">
							<h1 class="text-uppercase"> Hypertext Transfer Protocol (HTTP/1.1) <span
									class="small text-black-50">Authentication. Примери</span></h1>
						</div>
					</div>
					<div class="tab-content" id="nav-tabContent">
						<div class="tab-pane fade show active" id="nav-home1" role="tabpanel"
							aria-labelledby="nav-home1">
							<div class="row">

								<div class="col-lg-12 p-2 animated fadeIn">
									<h2>Какво е HTTP?</h2>
									<div class="clearfix"></div>
									<hr>
									<p>Hypertext Transfer Protocol (HTTP) е протокол на приложения слой за предаване на
										документи за хипермедия, като HTML. Той е създаден за комуникация между уеб
										браузъри и уеб сървъри, но може да се използва и за други цели. HTTP следва
										класически модел клиент-сървър, като клиентът отваря връзка, за да направи
										заявка, след което изчаква, докато получи отговор. HTTP е протокол без
										състояние, което означава, че сървърът не съхранява никакви данни (състояние)
										между две заявки. Въпреки че често се основава на TCP / IP слоеве, той може да
										се използва на всеки надежден транспортен слой, тоест на протокол, който не губи
										съобщения мълчаливо, както прави UDP.</p>
								</div>

							</div>
						</div>
						<div class="tab-pane fade show active" id="nav-home2" role="tabpanel"
							aria-labelledby="nav-home2">
							<div class="row">

								<div class="col-lg-12 p-2 animated fadeIn">
									<h2>Автентикация и Оторизация</h2>
									<div class="clearfix"></div>
									<hr>
									<p>Преди да се потопим в тази тема твърде дълбоко, първо трябва да определим какво
										всъщност е автентификацията и по-важното какво не е. Колкото и автентикацията да
										управлява съвременния интернет, темата често е свързана с термина: оторизация.
									</p>
									<p>Двете функции често са обвързани заедно в едно единствено решение - всъщност едно
										от решенията, които ще обсъдим в един момент, е хибридна система за автентикация
										и оторизация. Поради това и поради приликите им във приложението им, е лесно да
										се объркат тези два елемента.</p>
									<p>Най-лесният начин да разделите оторизация и автентикация е да попитате: какво
										всъщност доказват те? Казано по-просто, автентикация е когато предприятието
										докаже своята самоличност. С други думи, автентикацията доказва, че вие ​​сте
										това, което казвате, че сте. Това е сходно с наличието на лична карта - артикул,
										даден от доверен орган, който може да се използва като доказателство, което
										предполага, че всъщност сте това, за което се представяте.</p>
									<p>Оторизация е съвсем различно понятие, въпреки че със сигурност е тясно свързано с
										другото. Казано по-просто, оторизацията е когато предприятието докаже право на
										достъп. С други думи, оторизацията доказва, че имате право да направите заявка.
										Когато се опитвате да се върнете зад кулисите на концерт или събитие, не е
										задължително да доказвате, че сте това, което казвате, че сте - предоставяте
										билета, което фактически е доказателство, че имате право да сте там, където сте.
										Реално се “опитвате да влезете”.</p>
									<p>Помислете за момент за шофьорска книжка. В много страни шофьорската книжка
										доказва едновременно, че сте човек, за когото казвате, че сте, и след това
										доказва, че имате право да управлявате класа на превозното средство, което
										карате. В такъв случай имаме автентикация и оторизация - и има много случай на
										различни системи, които дават парче код, което удостоверява потребителя и
										доказва тяхното упълномощаване. В такъв случай имаме хибридно решение.</p>
								</div>

							</div>
						</div>
						<div class="tab-pane fade show active" id="nav-home3" role="tabpanel"
							aria-labelledby="nav-home3">
							<div class="row">

								<div class="col-lg-12 p-2 animated fadeIn">
									<h2>Схеми за автентикация на HTTP</h2>
									<div class="clearfix"></div>
									<hr>
									<p>HTTP предоставя две схеми за удостоверяване на клиенти: Основнa и дайджест
										автентикация. Спецификацията е дадена в &quot;RFC 2617 HTTP Authentication:
										Basic and digest Access Authentication&quot;. Важно е да се подчертае, че тези
										схеми просто предоставят средство за клиента да изпрати потребителското си име и
										парола за удостоверяване. Схемите не гарантират конфиденциалност на съобщението
										(т.е. криптиране на съобщението) и целостта на съобщението (атака човек в
										средата).</p>

								</div>

							</div>
						</div>
						<div class="tab-pane fade show active" id="nav-home4" role="tabpanel"
							aria-labelledby="nav-home4">
							<div class="row">

								<div class="col-lg-12 p-2 animated fadeIn">
									<h2>Основна Автентикация</h2>
									<div class="clearfix"></div>
									<hr>
									<p>Основната схема за автентикация бе въведена от HTTP / 1.0. Това е проста схема,
										която използва потребителско име и парола за удостоверяване на клиенти.</p>
									<p>Клиентът изпраща своето потребителско име и парола до сървъра. Сървърът търси
										файла с паролата и решава дали клиентът е упълномощен да получи достъп до
										искания ресурс. Файлът с парола може да бъде обикновен текстов файл или база
										данни (което значително подобрява процеса на извличане и съвпадение при случай
										на голяма потребителска база). Потребителите могат да бъдат групирани в групи.
										След това достъпът може да бъде контролиран на ниво група. За да се подобри
										гъвкавостта, защитеното пространство е разделено на различни царства. Всяка
										двойка потребителско име и парола е валидна за едно конкретно царство.</p>
									<p>ВАЖНО: Основната схема за автентикация не се счита за сигурна или безопасна. Това
										е така, защото потребителското име, паролата и съобщенията се изпращат в
										необработван текст (т.е. не са шифровани). Подслушватели могат лесно да вземат
										вашето потребителско име, парола и съобщения. Трябва да сте изключително
										предпазливи, когато давате потребителското си име и парола на сървър, който
										използва основна схема за автентикация (например: ако използвате същата парола
										за достъп до банковата си сметка !?). Използвайте вместо това специална парола с
										нисък риск.</p>
								</div>

							</div>
						</div>
						<div class="tab-pane fade show active" id="nav-home5" role="tabpanel"
							aria-labelledby="nav-home5">
							<div class="row">

								<div class="col-lg-12 p-2 animated fadeIn">
									<h2>Имплементирането на основна схема за автентикация</h2>
									<div class="clearfix"></div>
									<hr>
									<p>The configuration for basic access authentication involves 3 steps:</p>
									<p>Конфигурацията за основната автентикация включва 3 основни стъпки:</p>
									<ol style="list-style-type: decimal">
										<li>Създайте файл за пароли</li>
										<li>Конфигурирайте апаче сървърът да използва файла за пароли</li>
										<li>Имате възможност и да използвате файл за групи, за да контролирате достъпа
											на ниво групи</li>
									</ol>
									<p><strong>Стъпка 1</strong>: За да създадете файл за пароли, използвайте
										приложението &quot;htpasswd.exe&quot;, което идва с Apache HTTP Server (намира
										се в &quot;%APACHE_HOME%&quot;) както е показано по-долу:</p>
									<pre><code>&gt; ... сменяме директорията на %APACHE_HOME\bin ...
&gt; htpasswd ?
(помощно меню)


&gt; htpasswd -c ../conf/basic.users bob
(Използваме -c, за да съзададем нов файл)
Automatically using MD5 format on Windows.
New password: ***
Re-type new password: ***
Adding password for user bob


&gt; htpasswd ../conf/basic.users bill
Automatically using MD5 format on Windows.
New password: ****
Re-type new password: ****
Adding password for user bill


&gt; htpasswd ../conf/basic.users alice
Automatically using MD5 format on Windows.
New password: *****
Re-type new password: *****
Adding password for user alice


&gt; htpasswd ../conf/basic.users alan
Automatically using MD5 format on Windows.
New password: ****
Re-type new password: ****
Adding password for user alan</code></pre>
									<p>Горните команди създават файл наречен &quot;basic.users&quot; в директорията
										&quot;%APACHE_HOME&quot;; с 4 потребителя с парола. Уверете се, че файлът с
										потребители е извън директорията за документи и е защитен от неоторизирани
										потребители. Ако отворите файла с потребителите ще видите паролите не в текст,
										ами в шифриран текст.</p>
									<pre><code>bob:$apr1$c0Nw/XQI$mLuIl7DboHBkp4tZfh2Uj/
bill:$apr1$vn.O35Db$t8UasLOGIjBgVE93UvIMh0
alice:$apr1$1rPtsZaD$0MpAqMQC.KpePAffgnqK70
alan:$apr1$1pPU8Nwf$Ms/1EO90PBm25pnvaT5bi0</code></pre>
									<p><strong>Стъпка 2</strong>: За да конфигурирате Apache HTTP server да използва
										вашият файл за пароли, който току що създадохте, добавете следните директиви в
										подходящата директория на конфигурационния файл &quot;%APACHE_HOME%.conf&quot;
										(или ги поставете в &quot;.htaccess&quot; на директорията, ако е разрешено
										презаписването).</p>
									<pre><code>&lt;Directory protected-directories&gt;
  AuthType Basic
  AuthName Private
  AuthUserFile conf/basic.users
  Require valid-user
&lt;/Directory&gt;
</code></pre>
									<ul>
										<li>Блок директивата &lt;Directory&gt; създава група директории за прилагане на
											контрол на достъпа. Директивите, приложени в блока (като например изискване
											на валиден потребител), са приложими за всички директории (и техните
											под-директории), които съответстват на защитените директории.</li>
										<li>Директивата AuthType Basic специфицира, че ще използва основната схема за
											автентикация</li>
										<li>Директивата AuthName определя &quot;царство&quot; (или дял на цялото
											защитено пространство), което е набор от ресурси (директории, файлове,
											местоположения), които са достъпни със същото потребителско име и парола.
											Царствата позволяват защитените ресурси на сървъра да бъдат разделени в
											набор от защитни пространства, всяка със собствена схема за удостоверяване и
											/ или база данни за разрешения. Това име на царството ще бъде показано на
											клиента при подкана за потребителско име и парола. (Горното може да не е
											правилно за основната схема, тъй като името на царството не е вътре във
											файла с паролите - за разлика от дайджест схемата за автентикация.</li>
										<li>Директивата &quot;Require valid-user&quot; предоставя достъп на всички
											валидни потребители във файла с паролата. Вместо да предоставите достъп на
											всички потребители, можете да ограничите достъпа до определени потребители,
											като използвате директивата &quot;Require user <em>username1</em>
											<em>username2</em> ...&quot;.</li>
									</ul>
									<p>Когато клиент поиска защитен ресурс, Apache отговаря с отговор „401
										Authentication Required“. Това е, за да информира клиента, че потребителските
										идентификационни данни са необходими. След получаване на отговора 401, браузърът
										ще подкани потребителя да предостави потребителското си име и парола и ще ги
										изпрати на сървъра за проверка.</p>
									<p>Тъй като HTTP е протокол без състояние, всяка заявка ще се третира самостоятелно,
										без да се знае за предишните заявки. Тоест, трябва да предоставите едно и също
										потребителско име и парола на всеки искан ресурс. За щастие, браузърът се грижи
										за детайлите, като кешира потребителското име, паролата, царството и името на
										сървъра, така че да не се налага да въвеждате потребителското име и паролата за
										всяка заявка.</p>
									<p>Процесът на удостоверяване се обобщава по следния начин:</p>
									<ol style="list-style-type: decimal">
										<li>Клиент прави заявка за уеб ресурс, който е защитен с основна автентикация, с
											HTTP GET заявка</li>
										<li>Сървърът отговаря с &quot;401 Authorization Required&quot;.<br />
											Отговорът 401 включва &quot;WWW-Authenticate&quot; в хедъра, който определя
											вида на схемата за удостоверяване и царството, към което принадлежи
											защитеният ресурс.</li>
										<li>Клиентът отново изпраща HTTP GET заявка с хедър &quot;Authorization&quot;,
											която дава идентификационните данни (потребителско име / парола), необходими
											за достъп до това царство. Поверителните данни обикновено се кешират от
											браузъра за всички следващи заявки към същата сфера на конкретния сървър.
										</li>
										<li>Сървърът проверява идентификационните данни. Ако е приемливо, сървърът връща
											искания ресурс с код на състоянието „200 OK“. В противен случай отново ще
											бъде изпратен отговор &quot;401 Authorization Required&quot; . Повечето
											браузъри ще повторят стъпка (2) до (4) 3 пъти, преди да покажат съобщението
											401.</li>
									</ol>
								</div>


							</div>
						</div>
						<div class="tab-pane fade show active" id="nav-home6" role="tabpanel"
							aria-labelledby="nav-home5">
							<div class="row">

								<div class="col-lg-12 p-2 animated fadeIn">
									<h2>Следи на Съобщенията</h2>
									<div class="clearfix"></div>
									<hr>
									<p>Нека да разгледаме следата от съобщенията на основната автентикация. Създваме
										директория, наречена &quot;basic_auth&quot; (под &quot;htdocs&quot;), която
										съдържа файл &quot;test.html&quot;. Ако приемем, че Apache HTTP Server работи на
										порт 8000.</p>
									<p>Заявка на клиента:<br />
										<code>GET <strong>/basic_auth/test.html</strong> HTTP/1.1</code></p>
									<pre><code>Accept: image/gif, image/jpeg, */*
Accept-Language: en-us
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)
Host: 127.0.0.1:8000
</code></pre>
									<ul>
										<li><code>(blank line)</code></li>
									</ul>
									<p>Отговор на сървъра:<br />
										<code>HTTP/1.1 <strong>401 Authorization Required</strong></code></p>
									<pre><code>Date: Tue, 20 Oct 2009 07:25:42 GMT
Server: Apache/2.2.14 (Win32)
WWW-Authenticate: Basic realm=&quot;Private&quot;
Content-Length: 401
Content-Type: text/html; charset=iso-8859-1


</code></pre>
									<ul>
										<li><code>(response message body omitted)</code></li>
									</ul>
									<p>Клиента:</p>
									<p>Вместо да показва отговор &quot;401 Разрешение за разрешение&quot;, браузърът
										поставя диалогов прозорец (както е показано по-долу за firefox и IE), показващ
										сървъра, царството и подкана за потребителско име и парола.<br />
									</p>
									<div class="figure">
										<img src="images/image1.png" title="image_tooltip"" />
									</div>
									<div class="figure">
										<img src="images/image2.png" title="image_tooltip"" />
									</div>
									<p>Потребителят предоставя идентификационните данни. Браузърът отново изпраща
										заявката с заглавие &quot;Authorization&quot;, като дава своето потребителско
										име и парола.<br />
										<code>GET <strong>/basic_auth/test.html</strong> HTTP/1.1</code></p>
									<pre><code>Accept: image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, */*
Accept-Language: en-us
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)
Host: 127.0.0.1:8000
Connection: Keep-Alive
</code></pre>
									<ul>
										<li>**<code>Authorization: Basic YWxpY2U6YWxpY2U=</code></strong></li>
									</ul>
									<p>Сървърът:</p>
									<p>Ако данните са приемливи, сървърът връща ресурса с статус код &quot;200
										OK&quot;<br />
										<code>HTTP/1.1 <strong>200 OK</strong></code></p>
									<pre><code>Date: Tue, 20 Oct 2009 07:37:12 GMT
Server: Apache/2.2.14 (Win32)
Last-Modified: Sat, 20 Nov 2004 07:16:26 GMT
ETag: &quot;f00000003e4f9-2c-3e94b66c2e680&quot;
Accept-Ranges: bytes
Content-Length: 44
Content-Type: text/html


(body omitted)
Ако данните не са приемливи, сървърът връща  &quot;401 Authorization Required&quot; отново. Процесът на автентикация се повтаря.
HTTP/1.1 401 Authorization Required
Date: Tue, 20 Oct 2009 07:38:43 GMT
Server: Apache/2.2.14 (Win32)
WWW-Authenticate: Basic realm=&quot;Private&quot;
Content-Length: 401
Content-Type: text/html; charset=iso-8859-1</code></pre>
								</div>


							</div>
						</div>
						<div class="tab-pane fade show active" id="nav-home7" role="tabpanel"
							aria-labelledby="nav-home5">
							<div class="row">

								<div class="col-lg-12 p-2 animated fadeIn">
									<h2>Съображения за сигурност</h2>
									<div class="clearfix"></div>
									<hr>
									<p>При основната автентификация, идентифициращия се клиент изпраща данните си до
										сървъра не криптирани, а просто е кодирани в Base64 (вижте RFC2045 за
										спецификация на кодирането на Base64). Ако потърсите таблицата Base64 (или
										използвате WinZip), ще видите потребителското име / паролата в заглавието на
										разрешение в ясен текст.</p>
									<p>Най-сериозният недостатък при основната автентификация е, че тя предава паролата
										в чист текст по мрежата. Следователно тази парола не трябва да е същата като
										тази, която използвате за достъп до други важни лични дейности. Освен това
										веднъж удостоверено, съобщението се изпраща и в ясен текст.</p>
								</div>


							</div>
						</div>
						<div class="tab-pane fade show active" id="nav-home8" role="tabpanel"
							aria-labelledby="nav-home5">
							<div class="row">

								<div class="col-lg-12 p-2 animated fadeIn">
									<h2>Потребителски групи</h2>
									<div class="clearfix"></div>
									<hr>
									<p>По желание можете да групирате потребителите в групи и да предоставите достъп на
										избрани групи. За да използвате групов контрол на достъпа, трябва да създадете
										файл за групи (запишете го като &quot;% APACHE_HOME% / conf /
										basic.groups&quot;).</p>
									<pre><code>manager: alice alan
worker: bob bill</code></pre>
									<p>В конфигурацията на апаче &quot;conf.conf&quot;, включете следните директиви:</p>
									<pre><code>&lt;Directory protected-directories&gt;
  AuthType Basic
  AuthName Private
  AuthUserFile conf/basic.users
  AuthGroupFile conf/basic.groups
  Require group manager
&lt;/Directory&gt;</code></pre>
								</div>


							</div>
						</div>
						<div class="tab-pane fade show active" id="nav-home9" role="tabpanel"
							aria-labelledby="nav-home5">
							<div class="row">

								<div class="col-lg-12 p-2 animated fadeIn">
									<h2>Дайджест Автентикация</h2>
									<div class="clearfix"></div>
									<hr>
									<p>Подобно на основната автентификация, дайджест удостоверяването изисква клиентът
										да представи своите идентификационни данни по отношение на потребителско име и
										парола. За разлика от основното удостоверяване на достъп, дайджест
										удостоверяванетo не изпраща паролата по мрежата с ясен текст. Вместо това се
										предава MD5 дайджест на паролата (оттук и името дайджест удостоверяване).</p>
									<p>(Дайджестът е хеш-стойност от еднопосочна хеш функция. Да предположим, че y е
										дайджестът или едностранната хеш стойност на x, като се използва еднопосочна хеш
										функция h, т.е. y = h (x). Лесно е да се изчисли y от x, но е почти невъзможно
										да се изчисли x като y, дори ако функцията h е известна. Освен това, дори ако x1
										и x2 са сходни, съответните дайджести y1 = h (x1) и y2 = h (x2) ще бъдaт далеч.
										Информация за дайджест на MD5 може да бъде намерена от RFC1321 или на
										http://userpages.umbc.edu/~mabzug1/cs/md5/md5.html.)</p>
									<p>Схемата за дайджест автентикация не е предназначена да бъде цялостно решение на
										нуждата от сигурност за Интернет. Схемата не осигурява криптиране на съобщението
										(т.е. конфиденциалност на съобщението) и целостта на съобщението. Дайджест
										схемата има за цел да избегне сериозния недостатък в основната схема (т.е.
										изпращане на парола с ясен текст) и замяна на основната автентикация.</p>
									<p>Подобно на основната схема, дайджест схемата се основава на проста обмяна на
										предизвикателство-отговор за удостоверяване на потребителя. Сървърът предизвиква
										клиента с nonce стойност и очаква отговор, който е дайджест на потребителското
										име, паролата, дадената стойност nonce, метода HTTP и искания URL адрес. Важно е
										да се отбележи, че паролата не се изпраща в ясен текст, както в основната схема.
										Вместо това се изпраща хеш стойност. Nonce, което в идеалния случай трябва да
										бъде различно за всяка заявка, се използва за предотвратяване на &quot;атака при
										повторно изпълнение&quot;.</p>
									<p>Детайлите за автентикацията с дайджест са следните:</p>
									<ol style="list-style-type: decimal">
										<li>Клиентът прави заявка за уеб ресурс, защитен от дайджест схема за
											удостоверяване, чрез HTTP GET.</li>
										<li>Сървърът връща отговор &quot;401 Authentication Required&quot;, като посочва
											схемата за удостоверяване, областта и nonce, в хедъра на отговора
											&quot;WWW-Authenticate&quot;.</li>
										<li>
											<p>Клиентът комбинира паролата, nonce, HTTP метод и URI, изчислява дайджеста
												и изпраща този дайджест обратно на сървъра. Пример за изчисление:</p>
											<p>MD5(MD5(&lt;password&gt; + &quot;:&quot; + &lt;nouce&gt; + &quot;:&quot;
												+ MD5(&lt;method&gt; + &quot;;&quot; + &lt;uri&gt;)</p>
										</li>
										<li>
											<p>Сървърът независимо генерира хеша и проверява с получения хеш. Изпраща
												обратно поискания ресурс (със статус &quot;200 ОК&quot;), ако двете
												стойности на хеш съвпадат. В противен случай ще бъде изпратен &quot;401
												Authentication Required&quot; и процесът на удостоверяване се повтаря
												(или докато клиентът не отмени заявката).</p>
										</li>
									</ol>
								</div>


							</div>
						</div>
						<div class="tab-pane fade show active" id="nav-home10" role="tabpanel"
							aria-labelledby="nav-home5">
							<div class="row">

								<div class="col-lg-12 p-2 animated fadeIn">
									<h2>Имплементиране на дайджест автентикация</h2>
									<div class="clearfix"></div>
									<hr>
									<p>Също като основната схема за автентикация, нужната конфигурация за използването
										на дайджест автентикация в Апаче HTTP сървър включва следните 3 стъпки:</p>
									<ol style="list-style-type: decimal">
										<li>Създайте файл за пароли</li>
										<li>Конфигурирайте апаче сървърът да използва файла за пароли</li>
										<li>Имате възможност и да използвате файл за групи, за да контролирате достъпа
											на ниво групи</li>
									</ol>
									<p><strong>Стъпка 1</strong>: За да създадете файл за пароли трябва да използвате
										приложението &quot;htdigest&quot; в &quot;%APACHE_HOME%” по следния начин:</p>
									<pre><code>&gt; htdigest -h
Usage: htdigest [-c] password-file realm username
The -c flag creates a new file.


&gt; htdigest -c ..\conf\digest.users &quot;members only&quot; bob
Adding password for bob in realm members only.
New password: ***
Re-type new password: ***


&gt; htdigest ..\conf\digest.users &quot;members only&quot; alice
Adding user alice in realm members only
New password: *****
Re-type new password: *****</code></pre>
									<p>Съдържанието на дайджест файла за потребители &quot;conf.users&quot; е следното:
									</p>
									<pre><code>bob:members only:f64f2af9501033efe7c402417681e05b
alice:members only:d65afa1afb84c30a7547aecff4431700</code></pre>
									<p>Забележете, че за разлика от основната схема, всяка двойка потребителско име и
										парола е свързана с царство. Потребителското име и паролата са валидни само за
										едно царство.</p>
									<p><strong>Стъпка 2</strong>: За да активирате дайджест схемата трябва да включите
										следните директиви в конфигурацията на апаче &quot;conf.conf&quot; (или
										.htaccess ако презаписването е разрешено):</p>
									<pre><code>LoadModule digest_auth_module modules/mod_auth_digest.so
......
AddModule mod_auth_digest.c
......


&lt;Directory protected-directories&gt;
  AuthType digest
  AuthName &quot;members only&quot;
  AuthDigestFile conf/digest.users  # Use AuthUserFile for Apache 2
  Require user bob
&lt;/Directory&gt;</code></pre>
									<p>Директивата &quot;AuthType Digest&quot; се използва за активиране на
										удостоверяването на дайджест достъп. Директивата “AuthDigestFile” се използва за
										определяне на местоположението на файла с парола. (Ако срещнете грешка с
										директивата AuthDigestFile, използвайте директивата AuthUserFile вместо за
										Apache 2.) Царството в AuthName трябва да съответства на потребителския файл и е
										чувствително към регистъра.</p>
									<p><strong>Стъпка 3</strong>: Имате и възможност да използвате и файл за групи, за
										да контролирате нивото за достъп на ниво групи. Формата на файла е същия като
										този за основната схема за автентикация. Например:</p>
									<pre><code>admin: alice alan
audit: bob bill</code></pre>
									<p>Примерна конфигурация:</p>
									<pre><code>&lt;Directory protected-directories&gt;
  AuthType digest
  AuthName &quot;members only&quot;
  AuthDigestFile conf/digest
  AuthDigestGroupFile conf/digest.groups
  Require group admin
&lt;/Directory&gt;</code></pre>
									<p>Директивата AuthDigestGroupFile се използва за специфицирането на файл за групи
										вместо AuthGroupFile в основната схема за автентикация.</p>
								</div>


							</div>
						</div>
						<div class="tab-pane fade show active" id="nav-home11" role="tabpanel"
							aria-labelledby="nav-home5">
							<div class="row">

								<div class="col-lg-12 p-2 animated fadeIn">
									<h2>Следи на Съобщенията</h2>
									<div class="clearfix"></div>
									<hr>
									<p>Следа от съобщения, участващи в удостоверяването на дайджест достъп, е следната.
										Директория, наречена &quot;digest_auth&quot; е създадена под &quot;htdocs&quot;,
										съдържаща файл &quot;test.html&quot;. Ако приемем, че HTTP сървърът на Apache
										работи на порт 8000.</p>
									<p>Заявка на клиента:<br />
										<code>GET <strong>/digest_auth/test.html</strong> HTTP/1.1</code></p>
									<pre><code>Accept: image/gif, image/jpeg, */*
Accept-Language: en-us
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)
</code></pre>
									<ul>
										<li><code>Host: 127.0.0.1:8000</code></li>
									</ul>
									<p>Отговор на сървъра:<br />
										<code>HTTP/1.1 <strong>401 Authorization Required</strong></code></p>
									<pre><code>Date: Tue, 20 Oct 2009 08:16:43 GMT
Server: Apache/2.2.14 (Win32)
WWW-Authenticate: digest realm=&quot;Members only&quot;,
  nonce=&quot;LHOKe1l2BAA=5c373ae0d933a0bb6321125a56a2fcdb6fd7c93b&quot;, algorithm=MD5, qop=&quot;auth&quot;
Content-Length: 401
Content-Type: text/html; charset=iso-8859-1


</code></pre>
									<ul>
										<li><code>(body omitted)</code></li>
									</ul>
									<p>Клиента:</p>
									<p>Вместо да показва отговор &quot;401 Authorization Required&quot;, браузърът
										поставя диалогов прозорец, посочващ името на сървъра и царството, и подкана за
										вашето потребителско име и парола. Обърнете внимание, че в IE външният вид на
										диалоговия прозорец е различен от този, създаден от основната схема за
										удостоверяване.<br />
									</p>
									<div class="figure">
										<img src="images/image3.png" title="image_tooltip" />
									</div>
									<p><img src="images/image4.png" title="image_tooltip" /><br />
										Клиентът дава свойте данни и браузърът повтаря заявката.<br />
										<code>GET <strong>/digest_auth/test.html</strong> HTTP/1.1</code></p>
									<pre><code>Accept: image/gif, image/jpeg, */*
Accept-Language: en-us
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)
Host: 127.0.0.1:8000
Authorization: digest username=&quot;bob&quot;, realm=&quot;members only&quot;,
  qop=&quot;auth&quot;, algorithm=&quot;MD5&quot;, uri=&quot;/digest_auth/test.html&quot;,
  nonce=&quot;5UImQA==3d76b2ab859e1770ec60ed285ec68a3e63028461&quot;,
  nc=00000001, cnonce=&quot;1672b410efa182c061c2f0a58acaa17d&quot;,
</code></pre>
									<ul>
										<li>response=&quot;3d9ebe6b9534a7135a3fde59a5a72668&quot;</li>
									</ul>
									<p>Сървърът:</p>
									<p>Ако данните са приемливи, сървърът връща искания ресурс с код &quot;200
										OK”:<br />
										<code>HTTP/1.1 <strong>200 OK</strong></code></p>
									<pre><code>Date: Sun, 08 Feb 2004 14:08:57 GMT
Server: Apache/1.3.29 (Win32)
Authentication-Info: rspauth=&quot;670ff3158cec20b73d7342932f8c40a1&quot;,
  cnonce=&quot;1672b410efa182c061c2f0a58acaa17d&quot;,  nc=00000001, qop=auth
Last-Modified: Sat, 07 Feb 2004 10:53:25 GMT
ETag: &quot;0-23-4024c3a5&quot;
Accept-Ranges: bytes
Content-Length: 35
Keep-Alive: timeout=15, max=100
Connection: Keep-Alive
Content-Type: text/html


(body omitted)</code></pre>
									<p>Ако данни не са приемливи, сървърът отново връща &quot;401 Authorization
										Required&quot;, за да повтори процеса на удостоверяване. Браузърът може да ви
										подкани 3 пъти, преди да покаже съобщението &quot;401&quot;.<br />
										<code>HTTP/1.1 <strong>401 Authorization Required</strong></code></p>
									<pre><code>Date: Sun, 08 Feb 2004 14:20:00 GMT
Server: Apache/1.3.29 (Win32)
WWW-Authenticate: digest realm=&quot;members only&quot;,
  nonce=&quot;kEUmQA==afc92fa0cb1ce89577fc1c1c7d80389b8ddd7137&quot;,
  algorithm=MD5, qop=&quot;auth&quot;
Keep-Alive: timeout=15, max=100
Connection: Keep-Alive
Transfer-Encoding: chunked
Content-Type: text/html; charset=iso-8859-1


</code></pre>
									<ul>
										<li><code>(body omitted)</code></li>
									</ul>times by accident, sometimes on purpose (injected humour and the
									like).</p>
								</div>


							</div>
						</div>
						<div class="tab-pane fade show active" id="nav-home12" role="tabpanel"
							aria-labelledby="nav-home5">
							<div class="row">

								<div class="col-lg-12 p-2 animated fadeIn">
									<h2>Детайли при дайджестването</h2>
									<div class="clearfix"></div>
									<hr>
									<p>Когато клиент поиска защитен ресурс по дайджест схемата, сървърът връща отговор
										&quot;401 Authentication Required&quot;, който включва заглавие
										&quot;WWW-authenticate&quot;. Следната информация е включена в хедъра
										&quot;WWW-authenticate&quot;:</p>
									<ul>
										<li>digest: информирайте клиента, че дайджест схемата за удостоверяване е
											налице.</li>
										<li>realm: &quot;царството&quot;, към което принадлежи защитеният ресурс
											(припомнете, че потребителското име / паролата е зададено на основата на
											областта и валидно само за тази конкретна област).</li>
										<li>
											<p>nounce (server's nounce): сървърът трябва уникално да генерира nounce
												всеки път, когато се задейства &quot;401&quot; отговор (така че да се
												предотврати &quot;атака при повторно изпълнение&quot;). Стойността на
												nonce зависи от внедряването. Например nonce на сървъра може да се
												състои от:<br />
												Време за печат: H (Time-печат: ETAG: частния ключ). Печатът с време може
												да се използва за ограничаване на срока на валидност на nonce, за да се
												предотврати &quot;атака при повторно изпълнение&quot;. Etag, който е
												заглавна единица на искания документ, може да предотврати атака при
												повторно изпълнение на актуализирана версия на този документ. Сървърът
												може да избере да внедри „еднократна nonce“ за PUT и POST заявки и
												времева марка за GET заявка.</p>
										</li>
										<li>аlgorithm: да информира клиента за поддържания от сървъра алгоритъм (и) за
											хеширане. В момента алгоритъмът включва MD5 и MD5-sess (MD5 сесия). Клиентът
											може да избере един от поддържаните алгоритми.</li>
										<li>
											<p>qop (quality of protection): да информира клиента за типовете „качество
												на защита“, поддържани от сървъра. В момента, qop включва
												&quot;auth&quot; (автентификация) и &quot;auth-int&quot; (удостоверяване
												с цялостност на съобщението, хеш стойността съдържа съобщението, за да
												се гарантира целостта на съобщението). Клиентът може да избере една от
												тези поддържани опции</p>
										</li>
									</ul>
									<p>След получаване на отговора &quot;401&quot; от сървъра, клиентът трябва да включи
										заглавие &quot;Authentication&quot; и да изпрати отново заявката. Следната
										информация е предоставена от хедъра на &quot;Authentication&quot;:</p>
									<ul>
										<li>digest</li>
										<li>username</li>
										<li>realm</li>
										<li>gop (quality of protection)</li>
										<li>algorithm</li>
										<li>uri: URI от реда за заявки, който е дублиран тук, тъй като проксито е
											позволено да променя URI на заявката по време на транзит.</li>
										<li>nonce (server's nonce)</li>
										<li>nc (nonce count):броят на заявките, които клиентът е изпратил с този nonce.
											Това позволява на сървъра да открие атака при преиграване, като поддържа
											собствено копие на броя, ако желае.</li>
										<li>cnonce (client's nonce):nonce, предоставян от клиента, допринася за
											получената стойност на хеш, за да се избегне “plaintext” атака</li>
										<li>response:хеш стойността, която се изчислява в съответствие с настройките на
											gop (auth или auth-int) и алгоритъм (MD5 или MD5-sess), както следва:</li>
									</ul>
									<pre><code>Се използва &quot;qop&quot; -&gt;
  H(H(A1):nonce:nc:cnonce:qop:H(A2))


Не се използва&quot;gop&quot; -&gt;
  H(H(A1):nonce:H(A2))


Се използва &quot;algorithm&quot; -&gt; &quot;MD5&quot; -&gt;
  A1 = Username:realm:password


Се използва &quot;algorithm&quot; -&gt; &quot;MD5-sess&quot; -&gt;
  A1 = Username:realm:password:nouce:cnonce


Се използва &quot;gop&quot; -&gt; &quot;auth&quot; -&gt;
  A2 = Method:URL


Се използва &quot;gop&quot; -&gt; &quot;auth-int&quot; -&gt;
  A2 = Method:URL:H(entity-body)</code></pre>
								</div>


							</div>
						</div>
						<div class="tab-pane fade show active" id="nav-home13" role="tabpanel"
							aria-labelledby="nav-home5">
							<div class="row">

								<div class="col-lg-12 p-2 animated fadeIn">
									<h2>Съображения за сигурност</h2>
									<div class="clearfix"></div>
									<hr>
									<p>Основната схема за автентикация има следните минуси:</p>
									<ul>
										<li>Паролата се изпраща в ясен текст</li>
										<li>Сървърът трябва да пази името и паролата в базата данни</li>
										<li>Няма цялостност на съобщенията</li>
									</ul>
									<p>Дайджест схемата преодолява тези недостатъци. Това обаче не гарантира
										конфиденциалност на съобщенията. Тя просто предоставя по-сигурен и безопасен
										начин за клиентите да представят своите данни. Тя не е толкова сигурна като
										Kerberos, частен ключ от страна на клиента или SSL, но е много по-добра от
										telnet, ftp и разбира се, основна схема за удостоверяване.</p>
								</div>


							</div>
						</div>
						<div class="tab-pane fade show active" id="nav-home14" role="tabpanel"
							aria-labelledby="nav-home5">
							<div class="row">

								<div class="col-lg-12 p-2 animated fadeIn">
									<h2>Използвани ресурси</h2>
									<div class="clearfix"></div>
									<hr>
									<ul>
										<li><a
												href="https://en.wikipedia.org/wiki/Digest_access_authentication">https://en.wikipedia.org/wiki/digest_access_authentication</a>
										</li>
										<li><a href="https://en.wikipedia.org/wiki/Basic_access_authentication"
												class="uri">https://en.wikipedia.org/wiki/Basic_access_authentication</a>
										</li>
										<li><a href="https://www.ntu.edu.sg/home/ehchua/programming/webprogramming/HTTP_Authentication.html"
												class="uri">https://www.ntu.edu.sg/home/ehchua/programming/webprogramming/HTTP_Authentication.html</a>
										</li>
										<li><a href="https://nordicapis.com/3-common-methods-api-authentication-explained/"
												class="uri">https://nordicapis.com/3-common-methods-api-authentication-explained/</a>
										</li>
										<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP"
												class="uri">https://developer.mozilla.org/en-US/docs/Web/HTTP</a></li>
									</ul>
								</div>


							</div>
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>

</body>

</html>